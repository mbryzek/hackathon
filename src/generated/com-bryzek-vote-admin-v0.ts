/**
 * TypeScript types for vote-admin
 * Based on API Builder specification at com.bryzek.vote.admin.v0
 *
 * Generated by API Builder - do not edit manually
 */

import type { ISODateTimeString } from './generated-types';

import type { LoginForm, SessionReference, User } from './com-bryzek-platform-v0.ts';
import type { Event, EventReference, EventStatus, Project, VoterType } from './com-bryzek-vote-api-v0.ts';

// ============================================================================
// Models
// ============================================================================

/**
 * Current admin session
 */
export interface AdminSession {
  session: SessionReference;
  user: User;
}

/**
 * A voting code
 */
export interface Code {
  id: string;
  event: EventReference;
  code: string;
  voter_type: VoterType;
  has_voted: boolean;
  created_at: ISODateTimeString;
}

/**
 * Form to generate voting codes
 */
export interface CodeGenerateForm {
  voter_type: VoterType;
  /** Number of codes to generate */
  count: number;
}

export interface CodeSummary {
  total: number;
  student: CodeSummaryType;
  parent: CodeSummaryType;
}

export interface CodeSummaryType {
  codes: number;
  votes: number;
}

export interface EventForm {
  /** URL-friendly slug */
  key: string;
  /** Display name */
  name: string;
  status?: EventStatus;
}

/**
 * Voting results for an event
 */
export interface EventResults {
  event: Event;
  student: Tally;
  parent: Tally;
}

export interface ProjectCsvForm {
  data: string;
}

export interface ProjectForm {
  name: string;
  description?: string;
}

/**
 * Form to reorder projects
 */
export interface ProjectReorderForm {
  /** Project IDs in desired order */
  project_ids: string[];
}

/**
 * Voting result for a project
 */
export interface ProjectTally {
  project: Project;
  vote_count: number;
}

export interface Tally {
  total_votes: number;
  projects: ProjectTally[];
}

// ============================================================================
// API Client
// ============================================================================

import { UnauthorizedErrorsResponse } from './generated-error-unauthorized-errors-response.ts';
import { ValidationErrorsResponse } from './generated-error-validation-errors-response.ts';
import { VoidResponse } from './generated-error-void-response.ts';
import { ApiException } from "./generated-util.ts";

export interface GetAdminSessionSessionOptions {
  headers?: Record<string, string>;
}

export interface CreateAdminSessionSessionsAndLoginsOptions {
  body: LoginForm;
  headers?: Record<string, string>;
}

export interface DeleteAdminSessionSessionOptions {
  headers?: Record<string, string>;
}

export interface GetCodesOptions {
  eventId: string;
  limit: number;
  offset: number;
  voterType?: VoterType;
  hasVoted?: boolean;
  q?: string;
  headers?: Record<string, string>;
}

export interface GetCodeSummaryOptions {
  headers?: Record<string, string>;
}

export interface CreateCodeGenerateOptions {
  eventId: string;
  body: CodeGenerateForm;
  headers?: Record<string, string>;
}

export interface DeleteCodeByIdOptions {
  eventId: string;
  id: string;
  headers?: Record<string, string>;
}

export interface GetEventsOptions {
  limit: number;
  offset: number;
  id?: string[];
  status?: EventStatus[];
  headers?: Record<string, string>;
}

export interface GetEventByIdOptions {
  headers?: Record<string, string>;
}

export interface CreateEventOptions {
  body: EventForm;
  headers?: Record<string, string>;
}

export interface UpdateEventByIdOptions {
  id: string;
  body: EventForm;
  headers?: Record<string, string>;
}

export interface DeleteEventByIdOptions {
  headers?: Record<string, string>;
}

export interface GetProjectsOptions {
  eventId: string;
  limit: number;
  offset: number;
  headers?: Record<string, string>;
}

export interface GetProjectByIdOptions {
  eventId: string;
  id: string;
  headers?: Record<string, string>;
}

export interface CreateProjectOptions {
  eventId: string;
  body: ProjectForm;
  headers?: Record<string, string>;
}

export interface CreateProjectCsvOptions {
  eventId: string;
  body: ProjectCsvForm;
  headers?: Record<string, string>;
}

export interface UpdateProjectByIdOptions {
  eventId: string;
  id: string;
  body: ProjectForm;
  headers?: Record<string, string>;
}

export interface DeleteProjectByIdOptions {
  eventId: string;
  id: string;
  headers?: Record<string, string>;
}

export interface CreateProjectReorderOptions {
  eventId: string;
  body: ProjectReorderForm;
  headers?: Record<string, string>;
}

export interface GetEventResultsOptions {
  headers?: Record<string, string>;
}

export class ApiClient {
  private baseUrl: string;

  constructor(baseUrl: string) {
    this.baseUrl = baseUrl;
  }

  async getAdminSessionSession(params: GetAdminSessionSessionOptions): Promise<AdminSession> {
    const url = `${this.baseUrl}/vote/admin/session`;

      const response = await fetch(url, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
    });

    if (response.status === 200) {
      const data = await response.json();
      return data;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async createAdminSessionSessionsAndLogins(params: CreateAdminSessionSessionsAndLoginsOptions): Promise<AdminSession> {
    const url = `${this.baseUrl}/vote/admin/sessions/logins`;

      const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
      body: JSON.stringify(params.body),
    });

    if (response.status === 201) {
      const data = await response.json();
      return data;
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async deleteAdminSessionSession(params: DeleteAdminSessionSessionOptions): Promise<void> {
    const url = `${this.baseUrl}/vote/admin/session`;

      const response = await fetch(url, {
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
    });

    if (response.status === 204) {
      return;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async getCodes(params: GetCodesOptions): Promise<Code[]> {
    const queryParts: string[] = [];
    if (params.voterType !== undefined && params.voterType !== null) {
      queryParts.push(`voter_type=${encodeURIComponent(params.voterType)}`);
    }
    if (params.hasVoted !== undefined && params.hasVoted !== null) {
      queryParts.push(`has_voted=${encodeURIComponent(String(params.hasVoted))}`);
    }
    if (params.q !== undefined && params.q !== null) {
      queryParts.push(`q=${encodeURIComponent(params.q)}`);
    }
    queryParts.push(`limit=${encodeURIComponent(String(params.limit))}`);
    queryParts.push(`offset=${encodeURIComponent(String(params.offset))}`);
    const queryString = queryParts.length > 0 ? '?' + queryParts.join('&') : '';
    const url = `${this.baseUrl}/vote/admin/events/${params.eventId}/codes${queryString}`;

      const response = await fetch(url, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
    });

    if (response.status === 200) {
      const data = await response.json();
      return data;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 404) {
      throw new VoidResponse(response);
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async getCodeSummary(eventId: string, options?: GetCodeSummaryOptions): Promise<CodeSummary> {
    const url = `${this.baseUrl}/vote/admin/events/${eventId}/codes/summary`;

      const response = await fetch(url, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        ...(options?.headers || {}),
      },
    });

    if (response.status === 200) {
      const data = await response.json();
      return data;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 404) {
      throw new VoidResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async createCodeGenerate(params: CreateCodeGenerateOptions): Promise<void> {
    const url = `${this.baseUrl}/vote/admin/events/${params.eventId}/codes/generate`;

      const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
      body: JSON.stringify(params.body),
    });

    if (response.status === 204) {
      return;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 404) {
      throw new VoidResponse(response);
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async deleteCodeById(params: DeleteCodeByIdOptions): Promise<void> {
    const url = `${this.baseUrl}/vote/admin/events/${params.eventId}/codes/${params.id}`;

      const response = await fetch(url, {
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
    });

    if (response.status === 204) {
      return;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 404) {
      throw new VoidResponse(response);
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async getEvents(params: GetEventsOptions): Promise<Event[]> {
    const queryParts: string[] = [];
    if (params.id !== undefined && params.id !== null) {
      params.id.forEach(value => queryParts.push(`id=${encodeURIComponent(value)}`));
    }
    if (params.status !== undefined && params.status !== null) {
      params.status.forEach(value => queryParts.push(`status=${encodeURIComponent(String(value))}`));
    }
    queryParts.push(`limit=${encodeURIComponent(String(params.limit))}`);
    queryParts.push(`offset=${encodeURIComponent(String(params.offset))}`);
    const queryString = queryParts.length > 0 ? '?' + queryParts.join('&') : '';
    const url = `${this.baseUrl}/vote/admin/events${queryString}`;

      const response = await fetch(url, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
    });

    if (response.status === 200) {
      const data = await response.json();
      return data;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async getEventById(id: string, options?: GetEventByIdOptions): Promise<Event> {
    const url = `${this.baseUrl}/vote/admin/events/${id}`;

      const response = await fetch(url, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        ...(options?.headers || {}),
      },
    });

    if (response.status === 200) {
      const data = await response.json();
      return data;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 404) {
      throw new VoidResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async createEvent(params: CreateEventOptions): Promise<Event> {
    const url = `${this.baseUrl}/vote/admin/events`;

      const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
      body: JSON.stringify(params.body),
    });

    if (response.status === 201) {
      const data = await response.json();
      return data;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async updateEventById(params: UpdateEventByIdOptions): Promise<Event> {
    const url = `${this.baseUrl}/vote/admin/events/${params.id}`;

      const response = await fetch(url, {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
      body: JSON.stringify(params.body),
    });

    if (response.status === 200) {
      const data = await response.json();
      return data;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 404) {
      throw new VoidResponse(response);
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async deleteEventById(id: string, options?: DeleteEventByIdOptions): Promise<void> {
    const url = `${this.baseUrl}/vote/admin/events/${id}`;

      const response = await fetch(url, {
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json',
        ...(options?.headers || {}),
      },
    });

    if (response.status === 204) {
      return;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 404) {
      throw new VoidResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async getProjects(params: GetProjectsOptions): Promise<Project[]> {
    const queryParts: string[] = [];
    queryParts.push(`limit=${encodeURIComponent(String(params.limit))}`);
    queryParts.push(`offset=${encodeURIComponent(String(params.offset))}`);
    const queryString = queryParts.length > 0 ? '?' + queryParts.join('&') : '';
    const url = `${this.baseUrl}/vote/admin/events/${params.eventId}/projects${queryString}`;

      const response = await fetch(url, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
    });

    if (response.status === 200) {
      const data = await response.json();
      return data;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async getProjectById(params: GetProjectByIdOptions): Promise<Project> {
    const url = `${this.baseUrl}/vote/admin/events/${params.eventId}/projects/${params.id}`;

      const response = await fetch(url, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
    });

    if (response.status === 200) {
      const data = await response.json();
      return data;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 404) {
      throw new VoidResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async createProject(params: CreateProjectOptions): Promise<Project> {
    const url = `${this.baseUrl}/vote/admin/events/${params.eventId}/projects`;

      const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
      body: JSON.stringify(params.body),
    });

    if (response.status === 201) {
      const data = await response.json();
      return data;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 404) {
      throw new VoidResponse(response);
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async createProjectCsv(params: CreateProjectCsvOptions): Promise<void> {
    const url = `${this.baseUrl}/vote/admin/events/${params.eventId}/projects/csv`;

      const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
      body: JSON.stringify(params.body),
    });

    if (response.status === 204) {
      return;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 404) {
      throw new VoidResponse(response);
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async updateProjectById(params: UpdateProjectByIdOptions): Promise<Project> {
    const url = `${this.baseUrl}/vote/admin/events/${params.eventId}/projects/${params.id}`;

      const response = await fetch(url, {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
      body: JSON.stringify(params.body),
    });

    if (response.status === 200) {
      const data = await response.json();
      return data;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 404) {
      throw new VoidResponse(response);
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async deleteProjectById(params: DeleteProjectByIdOptions): Promise<void> {
    const url = `${this.baseUrl}/vote/admin/events/${params.eventId}/projects/${params.id}`;

      const response = await fetch(url, {
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
    });

    if (response.status === 204) {
      return;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 404) {
      throw new VoidResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async createProjectReorder(params: CreateProjectReorderOptions): Promise<void> {
    const url = `${this.baseUrl}/vote/admin/events/${params.eventId}/projects/reorder`;

      const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
      body: JSON.stringify(params.body),
    });

    if (response.status === 204) {
      return;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 404) {
      throw new VoidResponse(response);
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async getEventResults(eventId: string, options?: GetEventResultsOptions): Promise<EventResults> {
    const url = `${this.baseUrl}/vote/admin/events/${eventId}/results`;

      const response = await fetch(url, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        ...(options?.headers || {}),
      },
    });

    if (response.status === 200) {
      const data = await response.json();
      return data;
    }

    if (response.status === 401) {
      throw new UnauthorizedErrorsResponse(response);
    }

    if (response.status === 404) {
      throw new VoidResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

}