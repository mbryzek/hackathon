/**
 * TypeScript types for playwright-vote
 * Based on API Builder specification at com.bryzek.playwright.vote.v0
 *
 * Generated by API Builder - do not edit manually
 */

import type { Event } from './com-bryzek-vote-api-v0.ts';

// ============================================================================
// Models
// ============================================================================

export interface PlaywrightVote {

}

export interface TestEvent {
  event: Event;
  student_codes: string[];
  parent_codes: string[];
}

export interface TestEventForm {
  number_projects: number;
  number_students: number;
  number_parents: number;
}

// ============================================================================
// API Client
// ============================================================================

import { ValidationErrorsResponse } from './generated-error-validation-errors-response.ts';
import { ApiException } from "./generated-util.ts";

export interface CreatePlaywrightVoteEventsOptions {
  tenantId: string;
  body: TestEventForm;
  headers?: Record<string, string>;
}

export class ApiClient {
  private baseUrl: string;

  constructor(baseUrl: string) {
    this.baseUrl = baseUrl;
  }

  async createPlaywrightVoteEvents(params: CreatePlaywrightVoteEventsOptions): Promise<TestEvent> {
    const url = `${this.baseUrl}/${params.tenantId}/playwright/events`;

      const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
      body: JSON.stringify(params.body),
    });

    if (response.status === 201) {
      const data = await response.json();
      return data;
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

}