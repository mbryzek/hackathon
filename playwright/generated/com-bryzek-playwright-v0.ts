/**
 * TypeScript types for playwright
 * Based on API Builder specification at com.bryzek.playwright.v0
 *
 * Generated by API Builder - do not edit manually
 */

import type { Gender, TenantSession, User } from './com-bryzek-platform-v0.ts';
import type { Game, GameType, GuestConnection, Player, PlayerStatus } from './com-bryzek-privatedinkers-api-v0.ts';

// ============================================================================
// Enums
// ============================================================================

export enum TestGameStatus {
  Upcoming = 'upcoming',
  Past = 'past',
}

// ============================================================================
// Models
// ============================================================================

export interface DeleteTestUsersForm {
  emails: string[];
}

export interface Playwright {

}

export interface PlaywrightPasswordResetToken {
  token: string;
}

export interface TestGame {
  game: Game;
  players: Player[];
}

export interface TestGameForm {
  status: TestGameStatus;
  /** Type of game (mixed, mens, womens, open). If not specified, defaults to open */
  game_type?: GameType;
  players: TestPlayerForm[];
  created_by_user_id?: string;
  add_user_to_game: boolean;
}

export interface TestGuestConnectionForm {
  user_id: string;
}

export interface TestPlayerForm {
  status: PlayerStatus;
  /** Optional genders for each player. Must match length of player_statuses if provided. Players without specified gender will have unknown gender */
  gender?: Gender;
}

export interface TestUserForm {
  number_guest_connections: number;
}

// ============================================================================
// API Client
// ============================================================================

import { ValidationErrorsResponse } from './generated-error-validation-errors-response.ts';
import { ApiException } from "./generated-util.ts";

export interface GetPlaywrightPasswordAndResetAndTokenByEmailOptions {
  tenantId: string;
  email: string;
  headers?: Record<string, string>;
}

export interface CreatePlaywrightUsersAndSessionOptions {
  headers?: Record<string, string>;
}

export interface CreatePlaywrightUsersOptions {
  tenantId: string;
  body: TestUserForm;
  headers?: Record<string, string>;
}

export interface CreatePlaywrightGamesOptions {
  tenantId: string;
  body: TestGameForm;
  headers?: Record<string, string>;
}

export interface CreatePlaywrightPlayersOptions {
  headers?: Record<string, string>;
}

export interface CreatePlaywrightConnectionsAndGuestOptions {
  tenantId: string;
  body: TestGuestConnectionForm;
  headers?: Record<string, string>;
}

export interface CreatePlaywrightsUuidsOptions {
  tenantId: string;
  number_: number;
  headers?: Record<string, string>;
}

export interface DeletePlaywrightUsersOptions {
  tenantId: string;
  body: DeleteTestUsersForm;
  sync?: boolean;
  headers?: Record<string, string>;
}

export class ApiClient {
  private baseUrl: string;

  constructor(baseUrl: string) {
    this.baseUrl = baseUrl;
  }

  async getPlaywrightPasswordAndResetAndTokenByEmail(params: GetPlaywrightPasswordAndResetAndTokenByEmailOptions): Promise<PlaywrightPasswordResetToken> {
    const url = `${this.baseUrl}/${params.tenantId}/playwright/password/reset/token/${params.email}`;

      const response = await fetch(url, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
    });

    if (response.status === 200) {
      const data = await response.json();
      return data;
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async createPlaywrightUsersAndSession(tenantId: string, options?: CreatePlaywrightUsersAndSessionOptions): Promise<TenantSession> {
    const url = `${this.baseUrl}/${tenantId}/playwright/users/session`;

      const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        ...(options?.headers || {}),
      },
    });

    if (response.status === 201) {
      const data = await response.json();
      return data;
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async createPlaywrightUsers(params: CreatePlaywrightUsersOptions): Promise<User> {
    const url = `${this.baseUrl}/${params.tenantId}/playwright/users`;

      const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
      body: JSON.stringify(params.body),
    });

    if (response.status === 201) {
      const data = await response.json();
      return data;
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async createPlaywrightGames(params: CreatePlaywrightGamesOptions): Promise<TestGame> {
    const url = `${this.baseUrl}/${params.tenantId}/playwright/games`;

      const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
      body: JSON.stringify(params.body),
    });

    if (response.status === 201) {
      const data = await response.json();
      return data;
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async createPlaywrightPlayers(tenantId: string, options?: CreatePlaywrightPlayersOptions): Promise<Player> {
    const url = `${this.baseUrl}/${tenantId}/playwright/players`;

      const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        ...(options?.headers || {}),
      },
    });

    if (response.status === 201) {
      const data = await response.json();
      return data;
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async createPlaywrightConnectionsAndGuest(params: CreatePlaywrightConnectionsAndGuestOptions): Promise<GuestConnection> {
    const url = `${this.baseUrl}/${params.tenantId}/playwright/connections/guest`;

      const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
      body: JSON.stringify(params.body),
    });

    if (response.status === 201) {
      const data = await response.json();
      return data;
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async createPlaywrightsUuids(params: CreatePlaywrightsUuidsOptions): Promise<string[]> {
    const queryParts: string[] = [];
    queryParts.push(`number=${encodeURIComponent(String(params.number_))}`);
    const queryString = queryParts.length > 0 ? '?' + queryParts.join('&') : '';
    const url = `${this.baseUrl}/${params.tenantId}/playwright/uuids${queryString}`;

      const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
    });

    if (response.status === 201) {
      const data = await response.json();
      return data;
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

  async deletePlaywrightUsers(params: DeletePlaywrightUsersOptions): Promise<void> {
    const queryParts: string[] = [];
    if (params.sync !== undefined && params.sync !== null) {
      queryParts.push(`sync=${encodeURIComponent(String(params.sync))}`);
    }
    const queryString = queryParts.length > 0 ? '?' + queryParts.join('&') : '';
    const url = `${this.baseUrl}/${params.tenantId}/playwright/users${queryString}`;

      const response = await fetch(url, {
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json',
        ...(params.headers || {}),
      },
      body: JSON.stringify(params.body),
    });

    if (response.status === 204) {
      return;
    }

    if (response.status === 422) {
      throw new ValidationErrorsResponse(response);
    }

    throw new ApiException(response, `Request failed with status ${response.status}`);

  }

}